"use strict";(self.webpackChunkbookmanager_frontend=self.webpackChunkbookmanager_frontend||[]).push([[122],{122:(e,n,t)=>{t.r(n),t.d(n,{default:()=>f});var o,r=t(528),a=t(43),s=t(65),c=t(464),i=t(165),l=t(579);const p=c.Ay.div(o||(o=(0,r.A)(["\n  display: flex;\n  justify-content: center;\n  gap: 8px;\n  margin-top: 32px;\n\n  button {\n    padding: 8px 14px;\n    background-color: white;\n    border: 1px solid #ddd;\n    border-radius: 6px;\n    font-size: 0.875rem;\n    cursor: pointer;\n\n    &:first-child {\n      color: white !important;\n      font-weight: bold;\n      background-color: #3b82f6;\n    }\n\n    &:hover {\n      color: white !important;\n      background-color: #3b82f6;\n    }\n  }\n"]))),d=e=>{let{serverData:n,movePage:t}=e;console.log("serverData=",n);let{page:o,size:r,totalCount:a,totalPages:s}=n,c=10*Math.ceil((o+1)/10);const i=c-10+1,d=Math.ceil(a/r);d<c&&(c=d);const g=[];for(let l=i;l<=c;l++)g[l-1]=l;const h=i>10,b=c<d;return(0,l.jsxs)(p,{children:[h?(0,l.jsx)("span",{onClick:()=>t({page:i-1,size:r}),children:"Prev"}):"",g.map((e,n)=>(0,l.jsx)("button",{type:"button",onClick:()=>t({page:e,size:r}),style:{color:"".concat(o+1===e?"red":"black")},children:e},n)),b?(0,l.jsx)("span",{onClick:()=>t({page:c+1,size:r}),children:"Next"}):""]})},g=()=>{const e=(e,n)=>e?parseInt(e):n,[n,t]=(0,s.ok)(),o=e(n.get("page"),1),r=e(n.get("size"),10),c=(0,s.PI)({page:o,size:r}).toString(),i=(0,s.Zp)();let l="";const[p,d]=(0,a.useState)(!1);return{moveToList:n=>{if(n){const t=e(n.page,1),o=e(n.size,10);l=(0,s.PI)({page:t,size:o}).toString()}else i({pathname:"../search"});d(e=>!e),i({pathname:"../search",search:l})},moveToRead:e=>{i({pathname:"../info/".concat(e),search:c})},page:o,size:r}};var h,b,u;const m=c.Ay.article(h||(h=(0,r.A)(["\n  margin-top: 48px;\n  .title {\n    font-size: 1.5rem;\n    font-weight: bold;\n    margin-bottom: 2rem;\n  }\n\n  .highlight {\n    color: #2563eb;\n  }\n"]))),k=c.Ay.div(b||(b=(0,r.A)(["\n  display: grid;\n  grid-template-columns: repeat(4, minmax(180px, 1fr));\n  gap: 48px 96px;\n"]))),x=c.Ay.div(u||(u=(0,r.A)(["\n  background-color: white;\n  padding: 16px;\n  border-radius: 8px;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);\n  text-align: center;\n\n  img {\n    width: 100%;\n    height: auto;\n    aspect-ratio: 3 / 4;\n    object-fit: cover;\n    border-radius: 4px;\n    margin-bottom: 12px;\n  }\n\n  h3 {\n    font-size: 1rem;\n    font-weight: 600;\n    margin-bottom: 6px;\n  }\n\n  p {\n    font-size: 0.875rem;\n    color: #555;\n  }\n"]))),f=()=>{const[e]=(0,s.ok)(),n=e.get("type"),t=e.get("keyword"),[o,r]=(0,a.useState)({books:[]}),{moveToList:c,moveToRead:p,page:h,size:b,refresh:u}=g();(0,a.useEffect)(()=>{if(!t)return;const e={type:n,keyword:t};(0,i.st)(e).then(e=>{r(e)})},[n,t]),(0,a.useEffect)(()=>{console.log("\ubd81\uc2a4=",o.books)},[o]);const f=(0,s.Zp)(),y=(0,s.PI)({page:h,size:b}).toString();return(0,l.jsxs)(m,{children:[(0,l.jsx)(k,{children:o.books.map(e=>(0,l.jsxs)(x,{onClick:()=>f({pathname:"../".concat(e.bookId),search:y}),children:[(0,l.jsx)("img",{src:e.cover,alt:e.title}),(0,l.jsx)("h3",{children:e.title}),(0,l.jsxs)("p",{children:[e.author," | ",e.publisher]})]},e.bookId))}),(0,l.jsx)(d,{serverData:o,movePage:c})]})}},165:(e,n,t)=>{t.d(n,{SO:()=>a,je:()=>s,st:()=>c});var o=t(722);const r="".concat("http://localhost:8080","/api/v1/books"),a=async e=>{try{return await o.A.get("".concat(r,"/").concat(e))}catch(n){return console.error("latestBook error:",n),{books:[]}}},s=async()=>{try{return(await o.A.get("".concat(r,"/latest"))).data}catch(e){return console.error("latestBook error:",e),{books:[]}}},c=async e=>{if(!e)return console.warn("\ub370\uc774\ud130\uc758 \uc0c1\ud0dc\uac00 \ube44\uc815\uc0c1\uc801\uc785\ub2c8\ub2e4."),{books:[]};const n=e.type,t=e.keyword;try{return(await o.A.get("".concat(r,"/search"),{params:{[n]:t}})).data}catch(a){return console.error("searchBook error:",a),{books:[]}}}}}]);
//# sourceMappingURL=122.42b4f715.chunk.js.map